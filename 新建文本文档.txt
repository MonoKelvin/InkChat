
    Component.onCompleted: {
        opacityAnimation.start();

        //        friendListView.refresh([
        //                                   // 一个完整的数据
        //                                   {
        //                                       id:1,
        //                                       itemType:"friend",
        //                                       nickName:"NickName",
        //                                       signature:"signature",
        //                                       avatar:"https://profile.csdnimg.cn/E/D/1/1_alongsxmx",
        //                                       onlineState:"online",
        //                                       friendNum:100,
        //                                       onlineDays:223
        //                                   },
        //                                   {
        //                                       id:233,
        //                                       itemType:"people",
        //                                       nickName:"Tony Stack",
        //                                       signature:"I am Iron Man, who is the strongest avenger!",
        //                                       avatar:"https://profile.csdnimg.cn/E/D/1/1_alongsxmx",
        //                                       onlineState:"none",
        //                                       friendNum:20,
        //                                       onlineDays:-1
        //                                   },
        //                                   {
        //                                       id:0,
        //                                       itemType:"group",
        //                                       groupName:"MyGroup",
        //                                       memberNum:100
        //                                   }
        //                               ])

        bookmarkListView.refresh(
                    [
                        { bookmarkName: "首页", titleName: "首页", qrcLocation: "qrc:/Welcome/Welcome.qml", children: [ ] },
                        {
                            bookmarkName: "文本类", titleName: "文本类", children:
                                [
                                { bookmarkName: "URL转码", titleName: "URL转码"},
                                { bookmarkName: "JSON格式化", titleName: "JSON格式化"},
                                { bookmarkName: "JSON格式化", titleName: "JSON格式化"},
                                { bookmarkName: "JSON格式化", titleName: "JSON格式化"},
                                { bookmarkName: "JSON格式化", titleName: "JSON格式化"},
                                { bookmarkName: "JSON格式化", titleName: "JSON格式化"},
                                { bookmarkName: "JSON格式化", titleName: "JSON格式化"},
                                { bookmarkName: "JSON格式化", titleName: "JSON格式化"},
                                { bookmarkName: "JSON格式化", titleName: "JSON格式化"},
                                { bookmarkName: "JSON格式化", titleName: "JSON格式化"},
                                { bookmarkName: "JSON格式化", titleName: "JSON格式化"},
                                { bookmarkName: "JSON格式化", titleName: "JSON格式化"},
                                { bookmarkName: "JSON格式化", titleName: "JSON格式化"},
                                { bookmarkName: "JSON格式化", titleName: "JSON格式化"},
                                { bookmarkName: "JSON格式化", titleName: "JSON格式化"},
                                { bookmarkName: "JSON格式化", titleName: "JSON格式化"},
                                { bookmarkName: "JSON格式化", titleName: "JSON格式化"}
                            ]
                        },
                        {
                            bookmarkName: "计算类",
                            titleName: "计算类",
                            qrcLocation: "",
                            children:
                                [
                                { bookmarkName: "HASH计算器", titleName: "HASH计算器", qrcLocation: "qrc:/HashCalculate/HashCalculate.qml" },
                                { bookmarkName: "Unix时间戳转换", titleName: "Unix时间戳转换", qrcLocation: "qrc:/TimestampTransform/TimestampTransform.qml" }
                            ]
                        },
                        {
                            bookmarkName: "制作类",
                            titleName: "制作类",
                            qrcLocation: "",
                            children:
                                [
                                { bookmarkName: "图标生成器", titleName: "图标生成器", qrcLocation: "qrc:/IconMaker/IconMaker.qml" },
                                { bookmarkName: "图标字体转PNG", titleName: "图标字体转PNG", qrcLocation: "qrc:/FontToPng/FontToPng.qml" },
                                { bookmarkName: "WebP图片制作器", titleName: "WebP图片制作器", qrcLocation: "qrc:/WebPMaker/WebPMaker.qml" },
                                { bookmarkName: "二维码生成器", titleName: "二维码生成器", qrcLocation: "qrc:/QRCodeMaker/QRCodeMaker.qml" },
                                { bookmarkName: "条形码生成器", titleName: "条形码生成器", qrcLocation: "qrc:/BarcodeMaker/BarcodeMaker.qml" }
                            ]
                        },
                        {
                            bookmarkName: "工具类",
                            titleName: "工具类",
                            qrcLocation: "",
                            children:
                                [
                                { bookmarkName: "代码行数统计", titleName: "代码行数统计", qrcLocation: "qrc:/LinesStatistics/LinesStatistics.qml" },
                                { bookmarkName: "PNG图片压缩", titleName: "PNG图片压缩", qrcLocation: "qrc:/PngOptimize/PngOptimize.qml" },
                                { bookmarkName: "JPG图片压缩", titleName: "JPG图片压缩", qrcLocation: "qrc:/JpgOptimize/JpgOptimize.qml" },
                                { bookmarkName: "二维码识别器", titleName: "二维码识别器 ", qrcLocation: "qrc:/QRCodeReader/QRCodeReader.qml" },
                                { bookmarkName: "批量替换", titleName: "批量替换 ", qrcLocation: "qrc:/BatchReplacement/BatchReplacement.qml" },
                                { bookmarkName: "屏幕拾色器", titleName: "屏幕拾色器", qrcLocation: "notSupport" },
                                { bookmarkName: "局域网文件传输", titleName: "局域网文件传输", qrcLocation: "qrc:/LanFileTransport/LanFileTransport.qml" }
                            ]
                        },
                        {
                            bookmarkName: "Qt相关",
                            titleName: "Qt相关",
                            qrcLocation: "",
                            children:
                                [
                                { bookmarkName: "PNG警告消除", titleName: "PNG警告消除", qrcLocation: "qrc:/PngWarningRemover/PngWarningRemover.qml" },
                                { bookmarkName: "PROPERTY生成", titleName: "PROPERTY生成", qrcLocation: "qrc:/PropertyMaker/PropertyMaker.qml" },
                                { bookmarkName: "CPP文件生成", titleName: "CPP文件生成", qrcLocation: "qrc:/CppFileMaker/CppFileMaker.qml" },
                                { bookmarkName: "TS文件翻译器", titleName: "TS文件翻译器", qrcLocation: "notSupport" }
                            ]
                        }
                    ] );
    }

    //    FriendListView {
    //        id: friendListView
    //        anchors.fill: parent
    //    }

    ListView {
        id: bookmarkListView
        y: 64
        width: 180
        height: parent.height - 64
        cacheBuffer: 9999

        model: ListModel {
            id: bookmarkListModel
        }

        delegate: Item {
            id: bookmarkItem
            width: bookmarkListView.width
            height: 42
            clip: true

            Behavior on height { NumberAnimation { easing.type: Easing.InOutQuad; duration: 400 } }

            Component.onCompleted: {
                for ( var index = 0; index < bookmarkChildrenItem.count; ++index )
                {
                    var buf = bookmarkChildrenItem.get(index);

                    secondBookmarkListModel.append( {
                                                       bookmarkName: buf[ "bookmarkName" ],
                                                       titleName: buf[ "titleName" ],
                                                   } );
                }

                secondBookmarkListView.height = bookmarkChildrenItem.count * 42;
                secondBookmarkListView.y = -1 * secondBookmarkListView.height;
            }

            Item {
                x: 0
                y: 42
                width: parent.width
                height: secondBookmarkListView.height
                clip: true

                ListView {
                    id: secondBookmarkListView
                    x: 0
                    y: 0
                    width: parent.width
                    height: 0
                    visible: y !== (-1 * secondBookmarkListView.height)
                    boundsBehavior: Flickable.StopAtBounds

                    Behavior on y { NumberAnimation { easing.type: Easing.InOutQuad; duration: 200 } }

                    model: ListModel {
                        id: secondBookmarkListModel
                    }

                    delegate: Item {
                        id: secondBookmarkContains
                        width: bookmarkListView.width
                        height: 42

                        Button {
                            anchors.fill: parent
                            text: ""
                            visible: secondBookmarkListView.y === 0

                            Label {
                                x: 36
                                height: parent.height
                                text: bookmarkName
                                font.pixelSize: 16
                                verticalAlignment: Text.AlignVCenter
                                color: "#1e88e5"

                                Behavior on color { ColorAnimation { duration: 200 } }
                            }

                            onClicked: {
                                // todo
                            }
                        }

                        Rectangle {
                            anchors.fill: parent
                            color: "#ffffff"
                            visible: secondBookmarkListView.y !== 0

                            Label {
                                x: 36
                                height: parent.height
                                text: bookmarkName
                                font.pixelSize: 16
                                verticalAlignment: Text.AlignVCenter
                            }
                        }
                    }
                }
            }

            Button {
                width: parent.width
                height: 42

                onClicked: {
                    // todo

                    if ( secondBookmarkListModel.count )
                    {
                        if (secondBookmarkListView.visible)
                        {
                            secondBookmarkListView.y = -1 * secondBookmarkListView.height;
                            bookmarkItem.height = 42;
                        }
                        else
                        {
                            secondBookmarkListView.y = 0;
                            bookmarkItem.height = 42 + secondBookmarkListView.height;
                        }
                    }
                }

                Label {
                    x: 18
                    height: parent.height
                    text: bookmarkName
                    font.bold: true
                    verticalAlignment: Text.AlignVCenter
                    font.pixelSize: 16
                    color: "#1e88e5"

                    Behavior on color { ColorAnimation { duration: 200 } }
                }
            }
        }

        function refresh( items ) {
            bookmarkListModel.clear();

            for (var index = 0; index < items.length; index++)
            {
                var buf = items[index];
                bookmarkListModel.append( {
                                             bookmarkName: buf["bookmarkName"],
                                             titleName: buf["titleName"],
                                             bookmarkChildrenItem: buf["children"]
                                         } );
            }
        }

        MouseArea {
            anchors.fill: parent
            acceptedButtons: Qt.MidButton

            onWheel: {
                bookmarkListView.contentY -= wheel.angleDelta.y;

                if ( bookmarkListView.contentY < 0 )
                {
                    bookmarkListView.contentY = 0;
                }
                else
                {
                    var buf = bookmarkListView.contentHeight - bookmarkListView.height;

                    if ( buf > 0 )
                    {
                        if ( bookmarkListView.contentY > buf )
                        {
                            bookmarkListView.contentY = buf;
                        }
                    }
                    else
                    {
                        bookmarkListView.contentY = 0;
                    }
                }
            }
        }
    }
